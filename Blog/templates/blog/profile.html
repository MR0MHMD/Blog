{% extends 'parent/base.html' %}
{% load static %}
{% load blog_tags %}
{% load jformat %}
{% block title %}profile{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{% static 'CSS/blog/profile.css' %}">
{% endblock %}
{% block content %}

    <div class="profile-dashboard">
        <div class="user-menu">
            <div class="menu-header">
                <img src="{{ user.account.photo.url }}" alt="profile" class="menu-avatar">
                <span class="menu-username">{{ user.username }}</span>
                <button class="menu-toggle">â˜°</button>
            </div>

            <ul class="menu-options">
                <li><a href="{% url 'blog:edit_account' %}">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨</a></li>
                <li><a href="{% url 'blog:create_post' %}">â• Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø³Øª Ø¬Ø¯ÛŒØ¯</a></li>
                <li><a href="{% url 'blog:password_change' %}">ğŸ”‘ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</a></li>
                <li>
                    <form method="post" action="{% url 'blog:logout' %}">
                        {% csrf_token %}
                        <button class="logout" type="submit">ğŸšª Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨</button>
                    </form>
                </li>
            </ul>
        </div>

        <div class="table-section">
            <h2 class="posts-title">Ù¾Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§</h2>
            <table class="table">
                <tr class="tr">
                    <th class="row">Ø±Ø¯ÛŒÙ</th>
                    <th>Ù¾Ø³Øª</th>
                    <th>ÙˆÛŒØ±Ø§ÛŒØ´</th>
                    <th>Ø­Ø°Ù</th>
                </tr>
                {% for post in posts %}
                    <tr class="tr">
                        <td class="row">{{ forloop.counter }}</td>
                        <td><a class="title" href="{{ post.get_absolute_url }}">{{ post.title }}</a></td>
                        <td>
                            <a href="{% url 'blog:edit_post' post.id %}">
                                <img class="icon edit" src="{% static 'icons/edit.svg' %}" alt="ÙˆÛŒØ±Ø§ÛŒØ´">
                            </a>
                        </td>
                        <td>
                            <a href="{% url 'blog:delete_post' post.id %}">
                                <img class="icon delete" src="{% static 'icons/delete.svg' %}" alt="Ø­Ø°Ù">
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>

    <script>
        const toggle = document.querySelector('.menu-toggle');
        const menu = document.querySelector('.menu-options');
        toggle.addEventListener('click', () => {
            menu.classList.toggle('open');
        });
    </script>

{% endblock %}